-- 1. Create media_releases table
create table if not exists public.media_releases (
  id bigint generated by default as identity primary key,
  title text not null,
  press_name text not null,
  link_url text not null,
  published_date date,
  content text,              -- 요약 내용 (HTML)
  image_url text,            -- 대표 이미지 URL
  
  is_visible boolean default true,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 2. Setup RLS
alter table public.media_releases enable row level security;

create policy "Media are viewable by everyone."
  on public.media_releases for select using ( true );

create policy "Admins can insert media."
  on public.media_releases for insert with check ( auth.role() = 'authenticated' );

create policy "Admins can update media."
  on public.media_releases for update using ( auth.role() = 'authenticated' );

create policy "Admins can delete media."
  on public.media_releases for delete using ( auth.role() = 'authenticated' );
